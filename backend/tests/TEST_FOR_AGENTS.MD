# Testes do Sistema Multi-Agente - Gest√£o de Estoque e Receitas

Este documento cont√©m casos de teste para validar o funcionamento completo do sistema multi-agente com a nova arquitetura.

---

## √çndice de Testes

1. [Testes do Agente TRIVIAL](#1-testes-do-agente-trivial)
2. [Testes do SQL_ORCHESTRATOR](#2-testes-do-sql_orchestrator)
3. [Testes do RECIPE_READER](#3-testes-do-recipe_reader)
4. [Testes do ITEM_READER](#4-testes-do-item_reader)
5. [Testes do TRANSACTION_READER](#5-testes-do-transaction_reader)
6. [Testes do STRUCTURER_RECIPE + RECIPE_WRITER](#6-testes-do-structurer_recipe--recipe_writer)
7. [Testes do STRUCTURER_ITEM + ITEM_WRITER + TRANSACTION_WRITER](#7-testes-do-structurer_item--item_writer--transaction_writer)
8. [Testes do ITEM_WRITER (UPDATE/DELETE)](#8-testes-do-item_writer-updatedelete)
9. [Testes do REVISOR](#9-testes-do-revisor)
10. [Testes do Agente WEB](#10-testes-do-agente-web)
11. [Testes de Fluxo Completo](#11-testes-de-fluxo-completo)
12. [Testes de Casos Extremos](#12-testes-de-casos-extremos)

---

## 1. Testes do Agente TRIVIAL

### Teste 1.1 - Sauda√ß√£o Simples - OK
**Entrada:** `Oi, tudo bem?`

**Fluxo Esperado:** Orchestrator ‚Üí TRIVIAL

**Resposta Esperada:**
```
Ol√°! Tudo √≥timo, obrigado! üòä Sou seu assistente de estoque e receitas. 
Como posso te ajudar hoje?
```

---

### Teste 1.2 - Perguntas sobre Funcionalidades - OK
**Entrada:** `O que voc√™ pode fazer?`

**Fluxo Esperado:** Orchestrator ‚Üí TRIVIAL

**Resposta Esperada:**
```
Posso te ajudar com v√°rias coisas! 

- Consultar quantidades e pre√ßos de produtos no estoque
- Buscar receitas culin√°rias (tanto no banco quanto na internet)
- Verificar se voc√™ tem os ingredientes para uma receita
- Adicionar, atualizar e remover itens do estoque
- Salvar novas receitas no sistema
- Ver hist√≥rico de transa√ß√µes (compras, vendas, uso)

Experimente perguntar: 'Quantas bananas tenho?' ou 'Posso fazer torta banoffee?'
```

---

### Teste 1.3 - Bom dia - OK
**Entrada:** `Bom dia!`

**Fluxo Esperado:** Orchestrator ‚Üí TRIVIAL

**Resposta Esperada:**
```
Bom dia! Como posso ajudar voc√™ hoje? üòä
```

---

## 2. Testes do SQL_ORCHESTRATOR

### Teste 2.1 - Roteamento para SQL_RECIPE - OK
**Entrada:** `Quais receitas tenho cadastradas?` 

**Fluxo Esperado:** 
- Orchestrator ‚Üí SQL_ORCHESTRATOR
- SQL_ORCHESTRATOR ‚Üí SQL_RECIPE
- SQL_RECIPE ‚Üí RECIPE_READER

**Justificativa:** Pergunta sobre receitas cadastradas

---

### Teste 2.2 - Roteamento para SQL_ITEM - OK
**Entrada:** `Quantas bananas tenho?` 

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR
- SQL_ORCHESTRATOR ‚Üí SQL_ITEM
- SQL_ITEM ‚Üí ITEM_READER

**Justificativa:** Pergunta sobre quantidade de item no estoque

---

### Teste 2.3 - Roteamento para SQL_TRANSACTION - OK
**Entrada:** `Mostre o hist√≥rico de compras` 

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR
- SQL_ORCHESTRATOR ‚Üí SQL_TRANSACTION
- SQL_TRANSACTION ‚Üí TRANSACTION_READER

**Justificativa:** Pergunta sobre hist√≥rico de transa√ß√µes

---

## 3. Testes do RECIPE_READER

### Teste 3.1 - Listar Todas as Receitas - OK
**Entrada:** `Quais receitas voc√™ tem cadastradas?` 

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí RECIPE_READER

**Resposta Esperada:**
```
üìö Receitas cadastradas (4):

1. Torta Banoffee - torta cl√°ssica inglesa com banana e doce de leite
2. Pav√™ de Banana com Doce de Leite - sobremesa cremosa em camadas
3. Brigadeiro de Banana com Doce de Leite - brigadeiro cremoso
4. Risoto de Camar√£o - risoto cremoso com camar√µes frescos

Total: 4 receitas
```

---

### Teste 3.2 - Buscar Receita Espec√≠fica - OK
**Entrada:** `Como fazer torta banoffee?` 

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí RECIPE_READER

**Resposta Esperada:**
```
üìñ **Torta Banoffee**

Descri√ß√£o: torta cl√°ssica inglesa com banana e doce de leite

Modo de Preparo:
1. Em uma tigela, misture o biscoito triturado com a manteiga derretida at√© formar uma farofa √∫mida.
2. Forre o fundo e as laterais de uma forma de fundo remov√≠vel (cerca de 22 cm de di√¢metro), pressionando bem. Leve √† geladeira por 30 minutos.
3. Espalhe o doce de leite de maneira uniforme sobre a base de biscoito j√° firme.
4. Distribua as rodelas de banana sobre o doce de leite, cobrindo toda a superf√≠cie.
5. Na batedeira, bata o creme de leite fresco com o a√ß√∫car at√© atingir o ponto de chantilly (picos firmes).
6. Cubra a torta com o chantilly. Decore com raspas de chocolate ou polvilhe cacau em p√≥.
7. Mantenha na geladeira at√© a hora de servir.
```

---

### Teste 3.3 - Ver Ingredientes de Uma Receita - OK
**Entrada:** `Quais ingredientes tem na torta banoffee?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí RECIPE_READER

**Resposta Esperada:**
```
Ingredientes da Torta Banoffee:

- 4 unidades de banana nanica
- 400g de doce de leite
- 200g de biscoito maisena
- 100g de manteiga
- 500ml de creme de leite
- 80g de a√ß√∫car
- 30g de chocolate em p√≥
```

---

### Teste 3.4 - Verificar Disponibilidade (Tool check_recipe_availability) - OK
**Entrada:** `Consigo fazer torta banoffee?`

**Fluxo Esperado:** 
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí RECIPE_READER
- RECIPE_READER usa tool `check_recipe_availability`

**Resposta Esperada:**
```
SIM! Voc√™ pode fazer 'torta banoffee'!

Ingredientes dispon√≠veis:
4unidade de banana nanica, 400grama de doce de leite, 200grama de biscoito maisena, 100grama de manteiga, 500mililitro de creme de leite, 80grama de a√ß√∫car, 30grama de chocolate em p√≥
```

---

### Teste 3.5 - Verificar Disponibilidade com Falta de Ingredientes - OK
**Entrada:** `Posso fazer risoto de camar√£o?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí RECIPE_READER

**Resposta Esperada:**
```
Infelizmente N√ÉO √© poss√≠vel fazer 'risoto de camar√£o' no momento.

Faltam os seguintes ingredientes:
  - arroz arb√≥reo: necess√°rio 300grama, dispon√≠vel 0grama
  - camar√£o: necess√°rio 400grama, dispon√≠vel 0grama
  - vinho branco: necess√°rio 150mililitro, dispon√≠vel 0mililitro
  - caldo de legumes: necess√°rio 1000mililitro, dispon√≠vel 0mililitro
  - queijo parmes√£o: necess√°rio 50grama, dispon√≠vel 0grama

Mas posso sugerir estas receitas alternativas que voc√™ PODE fazer com os ingredientes dispon√≠veis:

1. Torta Banoffee - torta cl√°ssica inglesa com banana e doce de leite
2. Pav√™ de Banana com Doce de Leite - sobremesa cremosa em camadas
3. Brigadeiro de Banana com Doce de Leite - brigadeiro cremoso

Gostaria de saber mais sobre alguma dessas receitas?
```

---

### Teste 3.6 - Buscar Receitas com Ingrediente Espec√≠fico - OK
**Entrada:** `Quais receitas usam banana?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí RECIPE_READER

**Resposta Esperada:**
```
Receitas que cont√™m banana:

1. Torta Banoffee - torta cl√°ssica inglesa com banana e doce de leite
2. Pav√™ de Banana com Doce de Leite - sobremesa cremosa em camadas
3. Brigadeiro de Banana com Doce de Leite - brigadeiro cremoso
```

---

### Teste 3.7 - Receita N√£o Encontrada - OK
**Entrada:** `Como fazer bolo de chocolate?`

**Fluxo Esperado:** 
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí RECIPE_READER
- RECIPE_READER n√£o encontra
- REVISOR ‚Üí decide ir para WEB

**Resposta SQL:** `Receita 'bolo de chocolate' n√£o encontrada no banco de dados.`

---

## 4. Testes do ITEM_READER

### Teste 4.1 - Consulta Simples de Quantidade - OK
**Entrada:** `Quantas bananas tenho?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_READER

**Resposta Esperada:**
```
üì¶ Temos 12 unidades de banana nanica no estoque.
```

---

### Teste 4.2 - Consulta de Pre√ßo - OK
**Entrada:** `Qual o pre√ßo da banana?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_READER

**Resposta Esperada:**
```
Banana nanica: R$ 0,50 por unidade
```

---

### Teste 4.3 - Listar Todos os Itens - OK
**Entrada:** `Liste tudo do estoque`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_READER

**Resposta Esperada:**
```
üì¶ Itens no estoque (22):

1. amido de milho: 500grama (R$8,00)
2. arroz arb√≥reo: 0grama (R$12,00)
3. a√ß√∫car: 2000grama (R$4,50)
4. banana nanica: 12unidade (R$0,50)
5. biscoito champanhe: 300grama (R$20,00)
6. biscoito maisena: 400grama (R$10,00)
...
```

---

### Teste 4.4 - Itens com Estoque Baixo - OK
**Entrada:** `Quais itens t√™m menos de 5 unidades?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_READER

**Resposta Esperada:**
```
‚ö†Ô∏è Itens com estoque baixo (menos de 5):

- arroz arb√≥reo: 0grama
- camar√£o: 0grama
- caldo de legumes: 0mililitro
- queijo parmes√£o: 0grama
- vinho branco: 0mililitro
```

---

### Teste 4.5 - Itens Pr√≥ximos do Vencimento - OK
**Entrada:** `Mostre itens que vencem nos pr√≥ximos 7 dias`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_READER

**Resposta Esperada:**
```
‚è∞ Itens pr√≥ximos do vencimento (pr√≥ximos 7 dias):

- banana nanica: 12 unidades (vence em 5 dias - DD/MM/YYYY)
- gema de ovo: 12 unidades (vence em 7 dias - DD/MM/YYYY)
- leite: 2000mililitro (vence em 7 dias - DD/MM/YYYY)
- lim√£o: 5 unidades (vence em 7 dias - DD/MM/YYYY)
```

---

### Teste 4.6 - Itens Vencidos
**Entrada:** `Tem algum item vencido?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRADOR ‚Üí SQL_ITEM ‚Üí ITEM_READER

**Resposta Esperada:**
```
Nenhum item vencido no estoque.
```
(Ou lista de itens vencidos se houver)

---

### Teste 4.7 - Valor Total do Estoque - OK
**Entrada:** `Quanto vale meu estoque?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_READER

**Resposta Esperada:**
```
üí∞ Valor total do estoque: R$ X.XXX,XX
```

---

### Teste 4.8 - Item N√£o Encontrado
**Entrada:** `Quantos abacaxis tenho?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_READER

**Resposta Esperada:**
```
Item 'abacaxi' n√£o encontrado no estoque.
```

---

### Teste 4.9 - Detalhes Completos de Um Item
**Entrada:** `Me d√™ informa√ß√µes sobre o leite`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_READER

**Resposta Esperada:**
```
üì¶ **leite**
   Quantidade: 2000 mililitro
   Pre√ßo: R$5,00 por litro
   Descri√ß√£o: leite integral
   Validade: DD/MM/YYYY (daqui a 7 dias)
```

---

## 5. Testes do TRANSACTION_READER - OK

### Teste 5.1 - Hist√≥rico de Um Item Espec√≠fico
**Entrada:** `Mostre o hist√≥rico da banana`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_TRANSACTION ‚Üí TRANSACTION_READER

**Resposta Esperada:**
```
üìä Hist√≥rico de banana nanica:

DD/MM/YYYY - ENTRADA: compra inicial de estoque
   Quantidade: +20 unidades
   Valor: R$0,50

DD/MM/YYYY - SA√çDA: uso em receita: torta banoffee
   Quantidade: -4 unidades

DD/MM/YYYY - SA√çDA: uso em receita: pav√™ de banana
   Quantidade: -4 unidades
```

---

### Teste 5.2 - √öltimas N Transa√ß√µes
**Entrada:** `Mostre as √∫ltimas 10 transa√ß√µes`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_TRANSACTION ‚Üí TRANSACTION_READER

**Resposta Esperada:**
```
üìä Hist√≥rico de Transa√ß√µes (√∫ltimas 10):

üìÖ DD/MM/YYYY
   SA√çDA: consumo direto
   Item: leite
   Quantidade: -520 mililitro

üìÖ DD/MM/YYYY
   SA√çDA: uso em receita: pav√™ de banana
   Item: leite
   Quantidade: -480 mililitro
   
...
```

---

### Teste 5.3 - Total Gasto em Compras - OK
**Entrada:** `Quanto gastei em compras este m√™s?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_TRANSACTION ‚Üí TRANSACTION_READER

**Resposta Esperada:**
```
üí∞ Total gasto em compras este m√™s: R$ XXX,XX

Detalhamento:
- XX transa√ß√µes de compra
- Total de itens: XX
```

---

### Teste 5.4 - Itens Mais Usados - OK
**Entrada:** `Quais ingredientes mais uso?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_TRANSACTION ‚Üí TRANSACTION_READER

**Resposta Esperada:**
```
üìä Itens mais usados (por quantidade):

1. a√ß√∫car - 3000g (em 1 transa√ß√£o)
2. chocolate em p√≥ - 600g (em 2 transa√ß√µes)
3. leite - 1000ml (em 2 transa√ß√µes)
4. banana nanica - 12 unidades (em 3 transa√ß√µes)
...
```

---

### Teste 5.5 - Perdas do M√™s
**Entrada:** `Quais itens perdi este m√™s?`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_TRANSACTION ‚Üí TRANSACTION_READER

**Resposta Esperada:**
```
Nenhuma perda registrada este m√™s.
```
(Ou lista de perdas se houver transa√ß√µes do tipo "perda")

---

### Teste 5.6 - Balan√ßo de Entradas e Sa√≠das
**Entrada:** `Me mostre o balan√ßo do estoque da manteiga`

**Fluxo Esperado:** Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_TRANSACTION ‚Üí TRANSACTION_READER

**Resposta Esperada:**
```
üìä Balan√ßo de manteiga:

Total de entradas: +500g
Total de sa√≠das: -300g
Saldo: +200g
Estoque atual: 200g
```

---

## 6. Testes do STRUCTURER_RECIPE + RECIPE_WRITER

### Teste 6.1 - Salvar Receita Simples
**Entrada:** `Salve essa receita: Vitamina de Banana. Ingredientes: 2 bananas, 1 copo de leite, 1 colher de a√ß√∫car. Modo de preparo: Bata tudo no liquidificador e sirva gelado.`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí STRUCTURER_RECIPE
- STRUCTURER_RECIPE ‚Üí estrutura dados
- RECIPE_WRITER ‚Üí usa add_recipe_tool

**Resposta Esperada:**
```
Sucesso! A receita 'Vitamina de Banana' foi salva no banco de dados com seus ingredientes.
```

---

### Teste 6.2 - Salvar Receita da Web
**Contexto:** Usu√°rio buscou "receita de bolo de chocolate" na web e recebeu a receita completa

**Entrada:** `Sim, quero salvar a receita de bolo de chocolate`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí STRUCTURER_RECIPE
- STRUCTURER analisa hist√≥rico da conversa
- Extrai a receita mencionada anteriormente
- RECIPE_WRITER ‚Üí insere no banco

**Resposta Esperada:**
```
Sucesso! A receita 'Bolo de Chocolate' foi salva no banco de dados com seus ingredientes.
```

---

### Teste 6.3 - Salvar M√∫ltiplas Receitas
**Entrada:** `Salve essas receitas: 1) Suco Verde - ingredientes: couve, lim√£o, √°gua. Preparo: bata tudo. 2) Smoothie de Banana - ingredientes: banana, leite, mel. Preparo: bata e sirva.`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí STRUCTURER_RECIPE
- STRUCTURER ‚Üí estrutura 2 receitas
- RECIPE_WRITER ‚Üí insere ambas

**Resposta Esperada:**
```
Sucesso! 2 receitas foram salvas no banco de dados.
```

---

## 7. Testes do STRUCTURER_ITEM + ITEM_WRITER + TRANSACTION_WRITER

### Teste 7.1 - Adicionar Item Simples
**Entrada:** `Adicione 500g de caf√© ao estoque pelo pre√ßo de R$15`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí STRUCTURER_ITEM
- STRUCTURER_ITEM ‚Üí estrutura: `{item_data: {...}, transaction_data: {...}}`
- ITEM_WRITER ‚Üí usa add_item_tool ‚Üí retorna item_id
- TRANSACTION_WRITER (paralelo) ‚Üí registra transa√ß√£o de compra

**Resposta Esperada:**
```
Sucesso! Item 'caf√©' adicionado ao estoque: 500grama.
‚úì Transa√ß√£o registrada: Compra de caf√© - 500grama por R$15,00
```

---

### Teste 7.2 - Adicionar Item com Validade
**Entrada:** `Adicione 2 litros de leite, validade 15/01/2026, pre√ßo R$4 o litro`

**Fluxo Esperado:** 
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí STRUCTURER_ITEM
- STRUCTURER ‚Üí converte data para formato ISO
- ITEM_WRITER + TRANSACTION_WRITER

**Resposta Esperada:**
```
Sucesso! Item 'leite' adicionado ao estoque: 2litro.
‚úì Transa√ß√£o registrada: Compra de leite - 2litro por R$4,00
```

---

### Teste 7.3 - Adicionar M√∫ltiplos Itens
**Entrada:** `Comprei: 5kg de arroz por R$25, 1kg de feij√£o por R$8, e 12 ovos por R$6`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí STRUCTURER_ITEM
- STRUCTURER ‚Üí estrutura 3 itens
- ITEM_WRITER ‚Üí insere os 3
- TRANSACTION_WRITER ‚Üí registra 3 transa√ß√µes

**Resposta Esperada:**
```
Sucesso! 3 itens foram adicionados ao estoque.
‚úì Transa√ß√£o registrada: Compra de arroz - 5kg por R$25,00
‚úì Transa√ß√£o registrada: Compra de feij√£o - 1kg por R$8,00
‚úì Transa√ß√£o registrada: Compra de ovos - 12unidade por R$6,00
```

---

### Teste 7.4 - Adicionar Item Sem Pre√ßo
**Entrada:** `Adicione 3 tomates ao estoque`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí STRUCTURER_ITEM
- STRUCTURER ‚Üí price=0, price em transaction_data=null
- ITEM_WRITER + TRANSACTION_WRITER

**Resposta Esperada:**
```
Sucesso! Item 'tomate' adicionado ao estoque: 3unidade.
‚úì Transa√ß√£o registrada: Compra de tomate - 3unidade
```

---

## 8. Testes do ITEM_WRITER (UPDATE/DELETE)

### Teste 8.1 - Usar Ingrediente (UPDATE tipo uso)
**Entrada:** `Usei 200g de farinha`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_WRITER (direto, sem STRUCTURER)
- ITEM_WRITER ‚Üí usa update_item_tool
- Tool retorna dados de transa√ß√£o
- TRANSACTION_WRITER ‚Üí registra uso

**Resposta Esperada:**
```
Sucesso! farinha de trigo atualizado: 800grama (usou 200grama).
‚úì Transa√ß√£o registrada: Uso de farinha de trigo - 200grama
```

---

### Teste 8.2 - Vender Item (UPDATE tipo venda)
**Entrada:** `Vendi 5 bananas por R$2,50`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_WRITER
- ITEM_WRITER ‚Üí update_item_tool
- TRANSACTION_WRITER ‚Üí registra venda

**Resposta Esperada:**
```
Sucesso! banana nanica atualizado: 7unidade (vendeu 5unidade).
‚úì Transa√ß√£o registrada: Venda de banana nanica - 5unidade por R$2,50
```

---

### Teste 8.3 - Ajustar Estoque (UPDATE tipo ajuste)
**Entrada:** `Corrija a quantidade de a√ß√∫car para 3kg`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_WRITER
- ITEM_WRITER ‚Üí update_item_tool com new_amount=3000
- TRANSACTION_WRITER ‚Üí registra ajuste

**Resposta Esperada:**
```
Sucesso! a√ß√∫car ajustado: 3000grama (+1000grama).
‚úì Transa√ß√£o registrada: Ajuste de estoque de a√ß√∫car: de 2000grama para 3000grama (+1000grama)
```

---

### Teste 8.4 - Deletar Item Vencido (DELETE tipo perda)
**Entrada:** `Remova o leite vencido do estoque`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_WRITER
- ITEM_WRITER ‚Üí delete_item_tool com reason="perda"
- TRANSACTION_WRITER ‚Üí registra perda

**Resposta Esperada:**
```
Sucesso! Item 'leite' removido do estoque (2000mililitro).
‚úì Transa√ß√£o registrada: Remo√ß√£o de leite do estoque - 2000mililitro
```

---

### Teste 8.5 - Atualizar Pre√ßo
**Entrada:** `Atualize o pre√ßo da banana para R$0,80`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_WRITER
- ITEM_WRITER ‚Üí update_item_tool com new_price=0.80
- TRANSACTION_WRITER ‚Üí N√ÉO registra (s√≥ mudou pre√ßo, n√£o quantidade)

**Resposta Esperada:**
```
Sucesso! banana nanica atualizado (pre√ßo/validade).
```

---

### Teste 8.6 - Tentar Usar Mais do Que Tem (Valida√ß√£o)
**Entrada:** `Usei 200g de farinha`

**Fluxo Esperado:**
- Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_ITEM ‚Üí ITEM_WRITER
- ITEM_WRITER ‚Üí update_item_tool valida quantidade
- Retorna erro

**Resposta Esperada:**
```
Opera√ß√£o resultaria em quantidade negativa. Quantidade atual: 1000grama.
```

---

## 9. Testes do REVISOR

### Teste 9.1 - Finalizar com Resposta Completa
**Contexto:**
- Pergunta: "Quantas bananas tenho?"
- Resposta SQL: "üì¶ Temos 12 unidades de banana nanica no estoque."

**Decis√£o Esperada:** `nextAgent: FINALIZAR`

**Justificativa:** Resposta completa e satisfat√≥ria

---

### Teste 9.2 - Ir para WEB (Receita N√£o Encontrada)
**Contexto:**
- Pergunta: "Como fazer bolo de chocolate?"
- Resposta SQL: "Receita 'bolo de chocolate' n√£o encontrada no banco de dados."

**Decis√£o Esperada:** `nextAgent: WEB`
**Query Web:** `"receita bolo de chocolate com ingredientes"`

**Justificativa:** Receita n√£o cadastrada, precisa buscar na web

---

### Teste 9.3 - Finalizar com Alternativas (Receita Indispon√≠vel)
**Contexto:**
- Pergunta: "Posso fazer risoto de camar√£o?"
- Resposta SQL: "Infelizmente N√ÉO √© poss√≠vel... Faltam: X, Y, Z... Mas posso sugerir: 1. Torta Banoffee 2. Pav√™..."

**Decis√£o Esperada:** `nextAgent: FINALIZAR`

**Justificativa:** Resposta COMPLETA (informou falta + deu alternativas)

---

### Teste 9.4 - Finalizar com Opera√ß√£o Bem-Sucedida
**Contexto:**
- Pergunta: "Adicione caf√© ao estoque"
- Resposta SQL: "Sucesso! Item 'caf√©' adicionado. Transa√ß√£o registrada."

**Decis√£o Esperada:** `nextAgent: FINALIZAR`

**Justificativa:** Opera√ß√£o conclu√≠da com sucesso

---

## 10. Testes do Agente WEB

### Teste 10.1 - Buscar Receita N√£o Cadastrada
**Entrada:** `Como fazer bolo de chocolate?`

**Fluxo Esperado:**
1. Orchestrator ‚Üí SQL_ORCHESTRATOR ‚Üí SQL_RECIPE ‚Üí RECIPE_READER
2. N√£o encontra
3. REVISOR ‚Üí WEB
4. WEB ‚Üí busca receita

**Resposta Esperada:**
```
**Bolo de Chocolate**

**Ingredientes:**
- 2 x√≠caras de farinha de trigo
- 2 x√≠caras de a√ß√∫car
- 3/4 x√≠cara de chocolate em p√≥
- 2 ovos
- 1 x√≠cara de leite
- 1/2 x√≠cara de √≥leo
- 1 colher de sopa de fermento

**Modo de Preparo:**
1. Misture os ingredientes secos
2. Adicione os l√≠quidos e mexa bem
3. Despeje em forma untada
4. Asse a 180¬∞C por 40 minutos

**Tempo de Preparo:** 50 minutos
**Dificuldade:** F√°cil

Gostaria de salvar alguma receita no banco de dados? Se sim, qual?
```

---

### Teste 10.2 - Buscar Receita Espec√≠fica
**Entrada:** `Busque receita de lasanha vegetariana`

**Fluxo Esperado:** Orchestrator ‚Üí SQL ‚Üí Revisor ‚Üí WEB

**Resposta Final:** Receita completa + pergunta sobre salvar

---

## 11. Testes de Fluxo Completo

### Teste 11.1 - Fluxo: Buscar ‚Üí Salvar ‚Üí Verificar
**Sequ√™ncia:**

1. **Entrada:** `Busque uma receita de panqueca americana`
   - **Fluxo:** Orchestrator ‚Üí SQL ‚Üí Revisor ‚Üí WEB
   - **Resposta:** Receita completa + "Gostaria de salvar?"

2. **Entrada:** `Sim, salve a receita de panqueca`
   - **Fluxo:** Orchestrator ‚Üí SQL ‚Üí SQL_RECIPE ‚Üí STRUCTURER_RECIPE ‚Üí RECIPE_WRITER
   - **Resposta:** "Sucesso! A receita 'Panqueca Americana' foi salva."

3. **Entrada:** `Consigo fazer panqueca americana?`
   - **Fluxo:** Orchestrator ‚Üí SQL ‚Üí SQL_RECIPE ‚Üí RECIPE_READER (check_recipe_availability)
   - **Resposta:** Lista ingredientes + verifica√ß√£o de disponibilidade

---

### Teste 11.2 - Fluxo: Comprar ‚Üí Usar ‚Üí Ver Hist√≥rico
**Sequ√™ncia:**

1. **Entrada:** `Adicione 1kg de caf√© ao estoque, R$35`
   - **Fluxo:** Orchestrator ‚Üí SQL ‚Üí SQL_ITEM ‚Üí STRUCTURER_ITEM ‚Üí ITEM_WRITER + TRANSACTION_WRITER
   - **Resposta:** "Item adicionado" + "Transa√ß√£o registrada"

2. **Entrada:** `Usei 200g de caf√©`
   - **Fluxo:** Orchestrator ‚Üí SQL ‚Üí SQL_ITEM ‚Üí ITEM_WRITER + TRANSACTION_WRITER
   - **Resposta:** "caf√© atualizado: 800g (usou 200g). Transa√ß√£o registrada."

3. **Entrada:** `Mostre o hist√≥rico do caf√©`
   - **Fluxo:** Orchestrator ‚Üí SQL ‚Üí SQL_TRANSACTION ‚Üí TRANSACTION_READER
   - **Resposta:** Lista com compra + uso

---

### Teste 11.3 - Fluxo: Verificar Disponibilidade ‚Üí Adicionar Faltantes ‚Üí Fazer Receita
**Sequ√™ncia:**

1. **Entrada:** `Posso fazer risoto de camar√£o?`
   - **Resposta:** "N√£o, faltam: arroz arb√≥reo, camar√£o, vinho..."

2. **Entrada:** `Adicione 500g de arroz arb√≥reo, 600g de camar√£o, 200ml de vinho branco`
   - **Resposta:** "3 itens adicionados. 3 transa√ß√µes registradas."

3. **Entrada:** `Agora consigo fazer risoto de camar√£o?`
   - **Resposta:** "SIM! Voc√™ pode fazer 'risoto de camar√£o'!"

---

## 12. Testes de Casos Extremos

### Teste 12.1 - Pergunta Amb√≠gua
**Entrada:** `Tem chocolate?`

**Resposta Esperada:**
```
üì¶ **chocolate em p√≥**
   Quantidade: 400 grama
   Pre√ßo: R$40,00 por kg
   Descri√ß√£o: chocolate em p√≥ ou cacau
```

---

### Teste 12.2 - M√∫ltiplos Itens com Nome Similar
**Entrada:** `Quantos biscoitos tenho?`

**Resposta Esperada:**
```
Encontrei 2 itens relacionados a "biscoito":

üì¶ biscoito maisena: 400grama
üì¶ biscoito champanhe: 300grama
```

---

### Teste 12.3 - Erro de Digita√ß√£o
**Entrada:** `Quantas bananass tenho?`

**Resposta Esperada:**
```
üì¶ Temos 12 unidades de banana nanica no estoque.
```
(Sistema tolera erros usando LIKE)

---

### Teste 12.4 - Contexto de Conversa
**Sequ√™ncia:**

1. **Entrada:** `Quantas bananas tenho?`
   - **Resposta:** "12 unidades"

2. **Entrada:** `E o pre√ßo?`
   - **Resposta:** "R$ 0,50 por unidade"
   - (Sistema deve entender que "pre√ßo" se refere a banana do contexto)

---

### Teste 12.5 - Item J√° Existente
**Entrada:** `Adicione banana nanica ao estoque`

**Resposta Esperada:**
```
Item 'banana nanica' j√° existe no estoque. Use update para modificar a quantidade.
```

---

## 13. Checklist de Valida√ß√£o

Ap√≥s executar todos os testes, verifique:

### Roteamento:
- [ ] Orchestrator roteia corretamente: TRIVIAL, WEB, SQL_ORCHESTRATOR
- [ ] SQL_ORCHESTRATOR roteia: SQL_RECIPE, SQL_ITEM, SQL_TRANSACTION
- [ ] SQL_RECIPE roteia: RECIPE_READER, STRUCTURER_RECIPE, RECIPE_WRITER
- [ ] SQL_ITEM roteia: ITEM_READER, STRUCTURER_ITEM, ITEM_WRITER
- [ ] SQL_TRANSACTION sempre vai para TRANSACTION_READER

### Agentes READER:
- [ ] RECIPE_READER executa queries SQL corretamente
- [ ] RECIPE_READER usa check_recipe_availability quando apropriado
- [ ] ITEM_READER consulta itens com LIKE corretamente
- [ ] ITEM_READER formata respostas com unidades e pre√ßos
- [ ] TRANSACTION_READER mostra hist√≥rico formatado

### Agentes STRUCTURER + WRITER:
- [ ] STRUCTURER_RECIPE extrai receitas do hist√≥rico
- [ ] STRUCTURER_RECIPE formata ingredientes corretamente
- [ ] RECIPE_WRITER usa add_recipe_tool
- [ ] STRUCTURER_ITEM separa item_data e transaction_data
- [ ] ITEM_WRITER usa add_item_tool para INSERT
- [ ] ITEM_WRITER usa update_item_tool para UPDATE
- [ ] ITEM_WRITER usa delete_item_tool para DELETE
- [ ] TRANSACTION_WRITER registra transa√ß√µes em paralelo

### Revisor:
- [ ] Decide FINALIZAR quando resposta est√° completa
- [ ] Decide WEB quando receita n√£o encontrada
- [ ] Decide FINALIZAR mesmo com alternativas sugeridas
- [ ] Decide FINALIZAR para opera√ß√µes bem-sucedidas

### Fluxos Gerais:
- [ ] Sistema mant√©m contexto entre mensagens
- [ ] Transa√ß√µes s√£o registradas corretamente
- [ ] Valida√ß√µes funcionam (quantidade negativa, item j√° existe)
- [ ] Erros s√£o tratados adequadamente
- [ ] Mensagens s√£o claras e bem formatadas
- [ ] Emojis s√£o usados apropriadamente

---

**Data dos Testes:** ____/____/________

**Testado por:** _______________________